<p>{{ 'Target path' | trans({}, (bundle_name | lower)) }}: {{ params['upload_path_after_document_root'] }}</p>
    <ul>
{% if params['allowed_extensions'] %}<li>{{ 'Allowed file extensions' | trans({}, (bundle_name | lower)) }}: {{ params['allowed_extensions']}}</li>{% endif %}
{% if params['size_limit'] %}<li>{{ 'Max file size' | trans({}, (bundle_name | lower)) }}: {{ params['size_limit'] }} bytes</li>{% endif %}
{% if params['max_number_of_files'] %}<li>{{ 'Max number of files' | trans({}, (bundle_name | lower)) }}: {{ params['max_number_of_files'] }}</li>{% endif %}
    </ul>
	<div id="mmf-fm-file-uploader">
		<noscript>
			<p>{{ 'Please enable JavaScript to use file uploader.' | trans({}, (bundle_name | lower)) }}</p>
		</noscript>
	</div>


<script type="text/javascript">
//<![CDATA[
$(document).ready(function(){

    $("#mmf-fm-file-uploader").plupload({
		// General settings
		runtimes : 'html5,html4',
		url : '{{ path('mmf_fm_upload') }}',
		max_file_size : '{{ params['size_limit'] }}b',
		chunk_size : '1mb',
		unique_names : false,
        multiple_queues: true,
        multipart: true,
        multipart_params: { 'url_safe_encoded_params': '{{ url_safe_encoded_params }}'},
		// Specify what files to browse for
		filters : [
			{title : "{{ 'Allowed file extensions' | trans({}, (bundle_name | lower)) }}", extensions : "{{ params['allowed_extensions'] }}"},
		]
	});

/*	uploader.bind('FileUploaded', function(up, file, response) {
var obj = jQuery.parseJSON(response.response);
to get the url I then access obj.result

http://www.plupload.com/punbb/viewtopic.php?id=45

uploader.bind('ChunkUploaded', function(up, file, response){

        response = jQuery.parseJSON( response.response );

        if (response.error){
            uploader.trigger('Error', {
                code : response.error.code,
                message : response.error.message,
                file : file
            });
        }

    });

*/

});//closes $(document).ready ...

//]]>
</script>

